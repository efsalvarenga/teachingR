---
title: 'Learning R Chapter 2'
subtitle: 'Data Processing'
author: "EFS Alvarenga"
date: "23/07/2018"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(readxl)
```

## Before starting

The initial task is to get familiarised with the different data object types.

### Vectors

Several functions can be used to create vectors.

```{r}
v1 <- 1                 # vector with length 1
v1
v2 <- c(1,2,3,4)        # basic function for creating (combining) vectors
v2
1:10                    # sequence from 1 to 10
seq(1,10)               # sequence from 1 to 10
seq(1,10, by = 2)       # sequence from 1 to 10, 2 by 2
rep(1,5)                # repeat 1, 5 times
rep(c(1,2,4),5)         # repeat vector c(1,2,4) 5 times
```

### Data types

R can handle several data types.
Vectors and matrices are restricted to use the same type of data in the entire structure, while lists and data frames allow mixed data type structures.

```{r}
vlog  <- c(FALSE, TRUE, FALSE)            # vector of boolean data
vtex  <- c('x', 'key', 'water', 'true')   # vector of strings
vint  <- c(124, 34223, 43, 342)           # vector of integers
vreal <- c(23.4, 34.2, 2, 4.1)           # vector of real numbers
```

If the user (or some function) returns a vector with mixed data types, R will try to fit everything in the more flexible data type possible (generally strings).

```{r}
vmix <- c(1, 2, 'ops')
vmix
```

Many functions are available for testing the data type of a given object.

```{r}
is.logical(vlog)
is.character(vint)
is.character(vmix)
is.numeric(vtex)
```

### Data frames

Data frames are square tables.
Structurally speaking they work like a list of vectors of the same length, with the inherited flexibility of allowing different data types on each column.

```{r}
data.frame(let = c('A','B','C'), num = c(2, 3, 4), logi = c(T, F, T))
data.frame(let = c('A','B','C'),
           num = c(2, 3, 4),
           logi = c(T, F, T))
let = c('A','B','C')
num = c(2, 3, 4)
logi = c(T, F, T)
data.frame(let, num, logi)
```

Notice different ways of building the same object in R (as in many programming languages)/
Also notice we use `<-` for assigning values to an object, while `=` was used for assigning values to arguments within function calls.
This is a aesthetic decision as `=` can also be used for assigning values to objects.

### Saving and loading data frames

Data frames are flexible structures but still hold restrictions that allow them to be easily saved and loaded as simple table files.
CSV files are preferable given their easy interpretation in many applications and OSes.

```{r}
df1 <- data.frame(A = let,
                  B = num,
                  C = logi)
df1
write.table(x = df1,
            file = '../data/df1.csv',
            sep = ';',
            row.names = FALSE)
df2 <- read.table(file = '../data/df1.csv',
                  sep = ';',
                  header = TRUE)
df2
```

## Data processig using Base R

The function `read.csv()` and `read.csv2()` are sister functions of the `read.table()` used before and can be used to load many data sources.
Other file types can also be imported, such as MS Excel spreadsheets (through the `readxl` and many others), SQL querries, etc.
For further information of how to import specific file types, please see [This R Data Import Tutorial Is Everything You Need](https://www.datacamp.com/community/tutorials/r-data-import-tutorial).

You will be importing a simplyfied dataset for the next steps on this tutorial.
This dataset contains the historical energy generation for a few countries (in GWh).

```{r}
energy_gen <- read.csv(file = 'https://www.dropbox.com/s/tdzpd8rsnweeoo2/EnergyDataLight.csv?dl=1')
```

```{r}
energy_gen_full <- read.csv(file = 'https://www.dropbox.com/s/nx1rd3byrj7gtjv/EnergyData.csv?dl=1')
```
